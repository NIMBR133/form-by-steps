import{r as l,i as C,s as y,m as g,u as T,b as j,d as G,a,j as x,p as z,k as J,l as K}from"./index-98628372.js";import{S as Q,u as U,F as W,a as X,b as p,c as d,d as Y}from"./config-fields-39fe3011.js";import{S as h,D as ee,a as m}from"./api-d8ae2634.js";import{C as te,I as ae}from"./Checkbox-3ad07d98.js";import{c as v}from"./countries-65cfc65d.js";const se=c=>l.createElement("svg",{width:60,height:60,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",...c},l.createElement("rect",{width:60,height:60,rx:30,fill:"#ECF2FF"}),l.createElement("path",{d:"M8.00003 60C12.3391 60 16 56.3717 16 51.9972C16 47.6072 12.39 44 8.00003 44C3.61995 44 0 47.62 0 51.9972C0 56.3971 3.61995 60 8.00003 60Z",fill:"#0063FD"}),l.createElement("path",{d:"M8.00003 57C7.36854 57 6.95871 56.5902 6.95871 55.9614V53.0385H4.04136C3.42522 53.0385 3.00282 52.6259 3.00005 51.9972C2.99453 51.3657 3.41971 50.9559 4.04136 50.9559H6.95871V48.0414C6.95871 47.4252 7.36854 47.0028 8.00003 47.0001C8.62875 46.9944 9.04134 47.4197 9.04134 48.0414V50.9559H11.9614C12.5748 50.9559 13 51.3657 13 51.9972C13 52.6259 12.5748 53.0385 11.9614 53.0385H9.04134V55.9614C9.04134 56.5902 8.62875 57 8.00003 57Z",fill:"white"}),l.createElement("path",{d:"M32.8875 37.499H27.6195V30.9788C27.6195 30.5095 27.9345 30.2045 28.4038 30.2045H32.1133C32.5826 30.2045 32.8875 30.5095 32.8875 30.9788V37.499ZM21.2478 37.1512C21.2478 38.5944 22.1549 39.4669 23.6417 39.4669H36.8883C38.3751 39.4669 39.2721 38.5944 39.2721 37.1512V29.4978L30.8817 22.4595C30.4909 22.1308 30.0262 22.1391 29.6438 22.4595L21.2478 29.4978V37.1512ZM18 28.1263C18 28.6448 18.3901 29.0871 19.0266 29.0871C19.3385 29.0871 19.6166 28.9257 19.8619 28.7241L29.8388 20.3535C30.1086 20.1147 30.425 20.1147 30.6966 20.3535L40.6682 28.7241C40.907 28.9257 41.185 29.0871 41.497 29.0871C42.074 29.0871 42.5153 28.7289 42.5153 28.151C42.5153 27.8117 42.3842 27.5493 42.1299 27.3324L31.6752 18.5451C30.8162 17.8183 29.7275 17.8183 28.8603 18.5451L18.3937 27.3342C18.1312 27.5529 18 27.8464 18 28.1263ZM36.4689 23.2617L39.3065 25.6497V20.8012C39.3065 20.3483 39.018 20.0599 38.5652 20.0599H37.212C36.7674 20.0599 36.4689 20.3483 36.4689 20.8012V23.2617Z",fill:"#0063FD"})),V={[C.step_3]:{title:"Адрес регистрации",label:"Введите свой действующий адрес прописки"},[C.step_4]:{title:"Адрес проживания",label:"Введите свой действующий адрес проживания"}},{Option:oe}=Q,ne=y.div`
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 40px;

  @media ${g.xl} {
    column-gap: 20px;
  }

  @media ${g.md} {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
`,ie=y.div`
  display: flex;
  gap: 16px;

  @media ${g.xl} {
    gap: 10px;
  }

  @media ${g.md} {
    gap: 20px;
  }
`,re=y(oe)``,le=y(te)`
  margin-top: 40px;
`,ce={Fields:ne,Group:ie,Checkbox:le,OptionStyled:re},{Fields:de,OptionStyled:u,Group:ue,Checkbox:pe}=ce,Se=({step:c})=>{const{[c]:F}=T(j),[f,w]=l.useState([]),[_,q]=l.useState([]),[b,B]=l.useState([]),[k,H]=l.useState([]),S=G(),t=U({defaultValues:F||void 0}),r=t.getValues(),$=()=>{S(z())},E=e=>{c===C.step_3?S(J(e)):c===C.step_4&&S(K(e))},A=()=>{t.setValue("region",""),t.setValue("city",""),t.setValue("street",""),t.setValue("house",""),setTimeout(()=>t.setFocus("region"))},D=()=>{t.setValue("city",""),t.setValue("house",""),setTimeout(()=>t.setFocus("city"))},L=()=>{t.setValue("street",""),t.setValue("house",""),setTimeout(()=>t.setFocus("street"))},N=()=>{t.setValue("house",""),setTimeout(()=>t.setFocus("house"))},M=async e=>{var o;const s=(o=v.find(i=>i.value===r.country))==null?void 0:o.code,n=await m.searchRegionsByCountry(e,s);w(n.data.suggestions.map(i=>({...i,value:i.value.replaceAll("/","")})))},O=async e=>{var o;const s=(o=f.find(i=>i.value===r.region))==null?void 0:o.data.fias_id,n=await m.searchCitiesByRegion(e,s);q(n.data.suggestions)},Z=async e=>{var o;const s=(o=_.find(i=>i.data.city_with_type===r.city))==null?void 0:o.data.city_fias_id,n=await m.searchStreetsByCity(e,s);B(n.data.suggestions)},I=async e=>{var o;const s=(o=b.find(i=>i.data.street_with_type===r.street))==null?void 0:o.data.street_fias_id,n=await m.searchHousesByStreet(e,s);H(n.data.suggestions)},P=e=>{e&&(t.clearErrors("apartment"),t.setValue("apartment",""))},R=()=>{t.setValue("isNoApartment",!1)};return a(W,{icon:a(se,{}),title:V[c].title,text:V[c].label,btnPrev:{label:"Назад",onClick:$},btnNext:{label:"Далее",onClick:t.handleSubmit(E),disabled:Object.keys(t.formState.errors).length>0},children:a(de,{children:x(X,{...t,children:[a(p,{name:"country",required:d.required,onChangeField:A,render:({value:e,onChange:s,error:n})=>a(Y,{value:e,placeholder:"Россия",label:"Страна*",error:n,onChange:s,children:v.map(o=>a(u,{value:o.value,children:o.label},o.value))})}),a(h,{name:"region",placeholder:"Выберите регион",label:"Регион*",required:d.required,disabled:!r.country,onChange:D,onSearch:M,children:f.map(e=>a(u,{value:e.value,children:e.value},e.data.fias_id))}),a(h,{name:"city",placeholder:"Введите населённый пункт",label:"Город / населённый пункт*",required:d.required,disabled:!r.region,onChange:L,onSearch:O,children:_.map(e=>a(u,{value:e.data.city_with_type,children:e.data.city_with_type},e.data.city_fias_id))}),a(h,{name:"street",placeholder:"Введите улицу",label:"Улица*",required:d.required,disabled:!r.city,onChange:N,onSearch:Z,children:b.map(e=>a(u,{value:e.data.street_with_type,children:e.data.street_with_type},e.data.street_fias_id))}),x(ue,{children:[a(h,{name:"house",placeholder:"0",label:"Дом*",required:d.required,disabled:!r.street,width:90,onSearch:I,children:k.map(e=>a(u,{value:e.data.house,children:e.data.house},e.data.house_fias_id))}),a(p,{name:"apartment",required:r.isNoApartment?!1:d.required,onChangeField:R,render:({value:e,onChange:s,error:n})=>a(ae,{value:e,label:"Квартира*",placeholder:"0",width:90,error:n,onChange:s})}),a(p,{name:"isNoApartment",onChangeField:P,render:({value:e,onChange:s})=>a(pe,{label:"Нет квартиры",checked:e,onChange:s})})]}),a(p,{name:"registrationDate",required:d.required,render:({value:e,onChange:s,error:n})=>a(ee,{value:e,label:"Дата прописки*",placeholder:"дд.мм.гггг",onChange:s,error:n})})]})})})};export{Se as default};
